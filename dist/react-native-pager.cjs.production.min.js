'use strict';
function e(e) {
  return e && 'object' == typeof e && 'default' in e ? e.default : e;
}
var t,
  n = require('react'),
  r = e(n),
  i = require('react-native'),
  a = e(require('react-native-reanimated')),
  o = require('react-native-gesture-handler');
function u() {
  return (u =
    Object.assign ||
    function(e) {
      for (var t = 1; t < arguments.length; t++) {
        var n = arguments[t];
        for (var r in n)
          Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
      }
      return e;
    }).apply(this, arguments);
}
function l(e, t) {
  if (null == e) return {};
  var n,
    r,
    i = {},
    a = Object.keys(e);
  for (r = 0; r < a.length; r++) t.indexOf((n = a[r])) >= 0 || (i[n] = e[n]);
  return i;
}
((t = exports.Extrapolate || (exports.Extrapolate = {})).EXTEND = 'extend'),
  (t.CLAMP = 'clamp'),
  (t.IDENTITY = 'identity');
var s = a.event,
  c = a.defined,
  d = a.block,
  v = a.Value,
  f = a.divide,
  m = a.cond,
  p = a.eq,
  h = a.add,
  x = a.stopClock,
  y = a.Clock,
  w = a.set,
  g = a.clockRunning,
  E = a.multiply,
  I = a.sub,
  b = a.call,
  V = a.max,
  C = a.min,
  P = a.greaterThan,
  O = a.abs,
  S = a.ceil,
  j = a.interpolate,
  k = a.concat,
  D = a.neq,
  T = a.and,
  q = a.startClock,
  A = a.spring,
  z = a.debug;
function L(e) {
  var t,
    n,
    o = e.children,
    s = e.index,
    c = e.minimum,
    d = e.maximum,
    v = e.dimension,
    f = e.targetTransform,
    m = e.targetDimension,
    p = e.pageInterpolation,
    h = e.animatedIndex,
    x = W(E(s, v)),
    y = W(C(V(x, c), d)),
    w = W((((n = {})[m] = v), (n.transform = [((t = {}), (t[f] = y), t)]), n)),
    g = W(I(s, h)),
    b = W(H(g, p)),
    P = b.zIndex,
    O = l(b, ['zIndex']);
  return (
    P || (P = 0),
    r.createElement(
      a.View,
      { style: u({}, i.StyleSheet.absoluteFillObject, {}, w, { zIndex: P }) },
      r.createElement(
        a.View,
        { style: [i.StyleSheet.absoluteFillObject, O] },
        o
      )
    )
  );
}
function M(e, t) {
  void 0 === t && (t = 0);
  var r = W(new v(void 0 !== e ? e : t));
  return (
    n.useEffect(
      function() {
        void 0 !== e && r.setValue(e);
      },
      [e]
    ),
    r
  );
}
var N = n.createContext({});
function X() {
  var e = n.useContext(N);
  if (void 0 === e)
    throw new Error('usePager() must be used within a <PagerProvider />');
  return e;
}
var R = r.createContext(void 0);
function Y() {
  var e = n.useContext(R);
  if (void 0 === e)
    throw new Error('useIndex() must be used within an <IndexProvider />');
  return e;
}
function F() {
  return X()[2];
}
function G(e) {
  var t = F();
  return W(I(e, t));
}
function H(e, t) {
  return t
    ? Object.keys(t).reduce(function(n, r) {
        var i = t[r];
        if (Array.isArray(i)) {
          var a = i.map(function(t) {
            return H(e, t);
          });
          return (n[r] = a), n;
        }
        if ('object' == typeof i) {
          var o,
            u = l(i, ['unit']);
          return (o = i.unit ? k(j(e, u), i.unit) : j(e, i)), (n[r] = o), n;
        }
        if ('function' == typeof i) {
          var s = i(e);
          return (n[r] = s), n;
        }
        return n;
      }, {})
    : {};
}
function W(e) {
  return r.useRef(e).current;
}
var B = {
  stiffness: 1e3,
  damping: 500,
  mass: 3,
  overshootClamping: !1,
  restDisplacementThreshold: 0.01,
  restSpeedThreshold: 0.01,
};
function J(e, t, n, r) {
  var i = {
      finished: new v(0),
      velocity: new v(0),
      position: t,
      time: new v(0),
    },
    a = u({}, B, {}, r, { toValue: new v(0) });
  return d([
    m(
      g(e),
      [m(D(a.toValue, n), [w(i.finished, 0), w(a.toValue, n)])],
      [w(i.finished, 0), w(i.time, 0), w(i.velocity, 0), w(a.toValue, n), q(e)]
    ),
    A(e, i, a),
    m(i.finished, [x(e), w(i.position, t)]),
    i.position,
  ]);
}
var K = a.interpolate,
  Q = a.concat;
function U(e, t) {
  return t
    ? Object.keys(t).reduce(function(n, r) {
        var i = t[r];
        if (Array.isArray(i)) {
          var a = i.map(function(t) {
            return U(e, t);
          });
          return (n[r] = a), n;
        }
        if ('object' == typeof i) {
          var o,
            u = l(i, ['unit']);
          return (o = i.unit ? Q(K(e, u), i.unit) : K(e, i)), (n[r] = o), n;
        }
        if ('function' == typeof i) {
          var s = i(e);
          return (n[r] = s), n;
        }
        return n;
      }, {})
    : {};
}
function Z(e) {
  return n.useRef(e).current;
}
var $ = a.Value,
  _ = a.divide,
  ee = a.multiply,
  te = a.add,
  ne = { height: 50, width: '100%', flexDirection: 'row' };
function re(e) {
  var t = e.children,
    n = e.pageInterpolation,
    i = e.style,
    o = Z(U(G(e.index), n));
  return r.createElement(a.View, { style: [i || { flex: 1 }, o] }, t);
}
var ie = { height: 2, backgroundColor: 'aquamarine' };
(exports.Pager = function(e) {
  var t,
    i,
    u = e.onChange,
    l = e.initialIndex,
    j = void 0 === l ? 0 : l,
    k = e.children,
    D = e.springConfig,
    q = e.panProps,
    A = void 0 === q ? {} : q,
    X = e.pageSize,
    R = void 0 === X ? 1 : X,
    Y = e.threshold,
    F = void 0 === Y ? 0.1 : Y,
    G = e.minIndex,
    H = void 0 === G ? 0 : G,
    B = e.maxIndex,
    K = e.adjacentChildOffset,
    Q = void 0 === K ? 10 : K,
    U = e.style,
    Z = e.containerStyle,
    $ = e.type,
    _ = void 0 === $ ? 'horizontal' : $,
    ee = e.pageInterpolation,
    te = e.clamp,
    ne = void 0 === te ? {} : te,
    re = e.clampDrag,
    ie = void 0 === re ? {} : re,
    ae = n.useContext(N),
    oe = ae.animatedValue,
    ue = ae.animatedIndex,
    le = ae.nextIndex,
    se = n.Children.count(k),
    ce = void 0 === B ? Math.ceil((se - 1) / R) : B,
    de = W(new v(0)),
    ve = W(new v(0)),
    fe = W(new v(0)),
    me = W(
      s([{ nativeEvent: { translationX: de, translationY: ve } }], {
        useNativeDriver: !0,
      })
    ),
    pe = W(s([{ nativeEvent: { state: fe } }], { useNativeDriver: !0 })),
    he = -1;
  U && U.width && 'number' == typeof U.width && (he = U.width);
  var xe = -1;
  U && U.height && 'number' == typeof U.height && (xe = U.height);
  var ye = n.useState(he),
    we = ye[0],
    ge = ye[1],
    Ee = n.useState(xe),
    Ie = Ee[0],
    be = Ee[1],
    Ve = W(new v(0)),
    Ce = 'vertical' === _ ? 'height' : 'width',
    Pe = 'vertical' === _ ? 'translateY' : 'translateX',
    Oe = 'vertical' === _ ? ve : de,
    Se = 'vertical' === _ ? Ie : we,
    je = E(Ve, se),
    ke = 'vertical' === _ ? 1 : 2,
    De = M(F),
    Te = M(ie.prev, 1e9),
    qe = M(ie.next, 1e9),
    Ae = M(ce),
    ze = M(H),
    Le = W(new v(0)),
    Me = W(new v(0)),
    Ne = W(new v(j)),
    Xe = W(I(Ne, oe)),
    Re = W(O(Xe)),
    Ye = W(P(Re, De)),
    Fe = W(new v(0)),
    Ge = W(C(V(f(Oe, Ve), E(qe, -1)), Te)),
    He = W(new y()),
    We = W(
      d([
        m(
          p(fe, o.State.ACTIVE),
          [m(g(He), x(He)), m(Me, 0, [w(Le, oe), w(Me, 1)]), w(oe, I(Le, Ge))],
          [
            m(Me, [
              w(Me, 0),
              m(Ye, [
                w(Fe, S(Re)),
                w(
                  le,
                  m(P(Xe, 0), C(V(I(Ne, Fe), ze), Ae), C(V(h(Ne, Fe), ze), Ae))
                ),
                m(
                  c(u),
                  b([le], function(e) {
                    return null == u ? void 0 : u(e[0]);
                  })
                ),
              ]),
            ]),
            w(Ne, le),
            m(c(ue), w(ue, le)),
            w(oe, J(He, oe, le, D)),
          ]
        ),
        z('position', oe),
        m(c(oe), w(oe, oe)),
        oe,
      ])
    ),
    Be = M(ne.prev, se),
    Je = M(ne.next, se),
    Ke = W(E(I(We, Be), Ve)),
    Qe = W(E(h(We, Je), Ve)),
    Ue = M(R),
    Ze = W(E(We, Ve, Ue, -1)),
    $e =
      void 0 !== Q ? k.slice(Math.max(j - Q, 0), Math.min(j + Q + 1, se)) : k;
  return r.createElement(
    a.View,
    {
      style: Z ||
        (U && U.height ? { height: U.height } : void 0) || { flex: 1 },
    },
    r.createElement(a.Code, {
      key: Se,
      exec: m(T(p(Ve, we), p(Ve, Ie)), [], [m(p(ke, 1), w(Ve, Ie), w(Ve, we))]),
    }),
    r.createElement(
      o.PanGestureHandler,
      Object.assign({}, A, { onGestureEvent: me, onHandlerStateChange: pe }),
      r.createElement(
        a.View,
        { style: { flex: 1 } },
        r.createElement(
          a.View,
          { style: U || { flex: 1 } },
          r.createElement(
            a.View,
            {
              style: { flex: 1 },
              onLayout: function(e) {
                var t = e.nativeEvent.layout;
                t.width !== we && ge(t.width), t.height !== Ie && be(t.height);
              },
            },
            r.createElement(
              a.View,
              {
                style:
                  ((i = { flex: 1 }),
                  (i[Ce] = je),
                  (i.transform = [((t = {}), (t[Pe] = Ze), t)]),
                  i),
              },
              -1 === we
                ? null
                : $e.map(function(e, t) {
                    var n = t;
                    return (
                      void 0 !== Q && (n = j <= Q ? t : j - Q + t),
                      r.createElement(
                        L,
                        {
                          index: n,
                          animatedIndex: We,
                          minimum: Ke,
                          maximum: Qe,
                          dimension: Ve,
                          targetTransform: Pe,
                          targetDimension: Ce,
                          pageInterpolation: ee,
                        },
                        e
                      )
                    );
                  })
            )
          )
        )
      )
    )
  );
}),
  (exports.PagerContext = N),
  (exports.PagerProvider = function(e) {
    var t = e.children,
      n = e.initialIndex,
      i = void 0 === n ? 0 : n,
      a = W(new v(i)),
      o = W(new v(i)),
      u = W(new v(i));
    return r.createElement(
      N.Provider,
      { value: { animatedValue: a, animatedIndex: o, nextIndex: u } },
      'function' == typeof t
        ? t({ animatedValue: a, animatedIndex: o, nextIndex: u })
        : t
    );
  }),
  (exports.Pagination = function(e) {
    var t = e.children,
      i = e.pageInterpolation;
    return r.createElement(
      a.View,
      { style: u({}, ne, {}, e.style) },
      n.Children.map(t, function(e, t) {
        return r.createElement(
          re,
          { index: t, pageInterpolation: i, style: e.props.style },
          e
        );
      })
    );
  }),
  (exports.Progress = function(e) {
    var t = e.numberOfScreens,
      n = e.style,
      i = F(),
      o = Z(new $(0)),
      l = Z(_(o, t, _(1, te(i, 1))));
    return r.createElement(
      a.View,
      {
        onLayout: function(e) {
          o.setValue(e.nativeEvent.layout.width);
        },
      },
      r.createElement(a.View, {
        style: u(
          { width: l, height: 2, backgroundColor: 'rebeccapurple' },
          ie,
          {},
          n
        ),
      })
    );
  }),
  (exports.Slider = function(e) {
    var t = e.numberOfScreens,
      n = e.style,
      i = F(),
      o = Z(new $(0)),
      l = _(o, t),
      s = Z(ee(i, l));
    return r.createElement(
      a.View,
      {
        onLayout: function(e) {
          o.setValue(e.nativeEvent.layout.width);
        },
      },
      r.createElement(a.View, {
        style: u({ width: l, transform: [{ translateX: s }] }, ie, {}, n),
      })
    );
  }),
  (exports.interpolateWithConfig = U),
  (exports.useAnimatedIndex = F),
  (exports.useIndex = Y),
  (exports.useInterpolation = function(e, t) {
    return W(H(G(void 0 !== t ? t : Y()), e));
  }),
  (exports.useOffset = G),
  (exports.usePager = X);
//# sourceMappingURL=react-native-pager.cjs.production.min.js.map
